title: View
extends@: default

form:
  fields:
    tabs:
      type: tabs
      active: 1
      fields:
        view: # new tab
          type: tab
          title: View
          ordering@: content
          fields:

            header.start_section:
              type: section
              title: Starting Position
              text: "Choose a location/feature to center the view on, or set the latitude and longitude manually. Leave all fields blank or set the zoom to -1 if you don't want the map to zoom."
              underline: true
            
            header.start.location:
              type: select
              label: Central Location
              data-options@: 'Grav\Plugin\LeafletTourPlugin::getTourLocationsForView'
            
            header.start.lat:
              type: number
              label: Center Latitude
              validate:
                min: -90
                max: 90
                step: .00000000001
            
            header.start.long:
              type: number
              label: Center Longitude
              validate:
                min: -180
                max: 180
                step: .00000000001
            
            header.start.zoom:
              type: number
              label: Starting Zoom Level
              description: Choose an integer between 0 and 28 inclusive. Defaults to 12.
              size: long
              default: 10
              validate:
                min: -1
                max: 28
                step: 1
            
            header.features_set:
              type: fieldset
              title: Features
              icon: map-marker
              collapsed: true
              collapsible: true
              fields:
                
                header.features:
                  type: list
                  label: Feature List
                  description: A list of all locations/features included in the view.
                  style: vertical
                  btnLabel: Add Feature
                  controls: both
                  fields:
                    .id:
                      type: select
                      label: Feature
                      data-options@: 'Grav\Plugin\LeafletTourPlugin::getTourFeaturesForView'
                      validate:
                        required: true
            
            header.advanced_set:
              type: fieldset
              title: Advanced
              icon: cog
              collapsed: true
              collapsible: true
              fields:
                
                header.only_show_view_features:
                  type: toggle
                  toggleable: true
                  label: Only Show Current View Features
                  description: "When in this view, only the features provided in the Feature List (above) will be shown on the map. Overrides the tour setting."
                  highlight: 1
                  default: 0
                  options:
                    1: PLUGIN_ADMIN.ENABLED
                    0: PLUGIN_ADMIN.DISABLED
                  validate:
                    type: bool
                
                header.remove_default_basemap:
                  type: toggle
                  toggleable: true
                  label: Remove Default Basemap
                  description: If toggled, will remove the default basemap when a custom basemap is currently in use. This will save loading time, but may look odd if the custom basemap does not cover sufficient area. Overrides the tour setting.
                  highlight: 1
                  default: 1
                  options:
                    1: PLUGIN_ADMIN.ENABLED
                    0: PLUGIN_ADMIN.DISABLED
                  validate:
                    type: bool
                
                header.no_tour_basemaps:
                  type: toggle
                  label: Hide Tour Basemaps
                  description: By default, both basemaps set in the tour configuration and basemaps set in the view configuration will be shown in the view. Check this option to only show basemaps from the view configuration.
                  highlight: 1
                  default: 0
                  options:
                    1: PLUGIN_ADMIN.ENABLED
                    0: PLUGIN_ADMIN.DISABLED
                  validate:
                    type: bool
                
                header.basemaps:
                  type: list
                  label: Additional Basemap Images
                  style: vertical
                  btnLabel: Add Basemap
                  fields:
                    .file:
                      type: select
                      label: Select the basemap
                      data-options@: 'Grav\Plugin\LeafletTourPlugin::getBasemaps'
                      validate:
                        required: true

                header.list_popup_buttons:
                  type: toggle
                  toggleable: true
                  label: List View Popup Buttons
                  description: Buttons to go to all view feature popups will be added at the end of each view. Uncheck this option if you are going to manually determine where the buttons will be located using shortcodes. Overrides the tour setting.
                  highlight: 1
                  default: 1
                  options:
                    1: PLUGIN_ADMIN.ENABLED
                    0: PLUGIN_ADMIN.DISABLED
                  validate:
                    type: bool